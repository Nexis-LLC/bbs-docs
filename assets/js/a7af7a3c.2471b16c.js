"use strict";(self.webpackChunkbbs_docs=self.webpackChunkbbs_docs||[]).push([[584],{8453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>t});var s=n(6540);const i={},d=s.createContext(i);function l(e){const r=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(d.Provider,{value:r},e.children)}},8472:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"API/Error_Handling","title":"5.2. Error Handling","description":"1. Overview","source":"@site/docs/05_API/03_Error_Handling.md","sourceDirName":"05_API","slug":"/API/Error_Handling","permalink":"/bbs-docs/docs/API/Error_Handling","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Booking Service Proto Definition","permalink":"/bbs-docs/docs/API/Proto_Definitions/BookingService"},"next":{"title":"6. Data","permalink":"/bbs-docs/docs/data"}}');var i=n(4848),d=n(8453);const l={},t="5.2. Error Handling",o={},c=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. REST API Error Format",id:"2-rest-api-error-format",level:2},{value:"2.1. Fields",id:"21-fields",level:3},{value:"2.2. Example",id:"22-example",level:3},{value:"3. Common REST Error Codes",id:"3-common-rest-error-codes",level:2},{value:"4. gRPC Error Handling",id:"4-grpc-error-handling",level:2},{value:"4.1. Mapping to HTTP",id:"41-mapping-to-http",level:3},{value:"4.2. Error Payload (via <code>google.rpc.Status</code>)",id:"42-error-payload-via-googlerpcstatus",level:3},{value:"5. Guidelines for API Developers",id:"5-guidelines-for-api-developers",level:2},{value:"6. Error Logging and Monitoring",id:"6-error-logging-and-monitoring",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"52-error-handling",children:"5.2. Error Handling"})}),"\n",(0,i.jsx)(r.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,i.jsxs)(r.p,{children:["Effective and standardized error handling ensures that clients can reliably interpret and respond to API failures. This document outlines the error structure, categorization, and handling approach for both RESTful and gRPC APIs in the ",(0,i.jsx)(r.strong,{children:"Bus Ticket Booking System"}),"."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"2-rest-api-error-format",children:"2. REST API Error Format"}),"\n",(0,i.jsx)(r.p,{children:"All error responses in REST APIs follow a consistent JSON structure:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\n  "error": "Descriptive error message",\n  "code": "ERROR_CODE",\n  "details": {\n    "field": "value",\n    "...": "..."\n  }\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"21-fields",children:"2.1. Fields"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"error"})," (string): Human-readable error message."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"code"})," (string): Machine-readable error code in uppercase snake_case."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"details"})," (object, optional): Field-specific validation errors or contextual metadata."]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"22-example",children:"2.2. Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\n  "error": "Invalid request payload",\n  "code": "INVALID_INPUT",\n  "details": {\n    "seatId": "Seat already booked"\n  }\n}\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"3-common-rest-error-codes",children:"3. Common REST Error Codes"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"HTTP Status"}),(0,i.jsx)(r.th,{children:"Error Code"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"400"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"INVALID_INPUT"})}),(0,i.jsx)(r.td,{children:"Malformed or semantically invalid request body"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"401"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"UNAUTHORIZED"})}),(0,i.jsx)(r.td,{children:"Missing or invalid authentication token"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"403"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"FORBIDDEN"})}),(0,i.jsx)(r.td,{children:"Insufficient permissions for requested action"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"404"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"NOT_FOUND"})}),(0,i.jsx)(r.td,{children:"Requested resource does not exist"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"409"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"CONFLICT"})}),(0,i.jsx)(r.td,{children:"Business logic conflict (e.g., already cancelled)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"422"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"VALIDATION_FAILED"})}),(0,i.jsx)(r.td,{children:"Input passes schema but fails business rules"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"500"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"INTERNAL_ERROR"})}),(0,i.jsx)(r.td,{children:"Unexpected server-side error"})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"4-grpc-error-handling",children:"4. gRPC Error Handling"}),"\n",(0,i.jsxs)(r.p,{children:["In gRPC, errors are returned using status codes and metadata. The structure follows Google\u2019s ",(0,i.jsx)(r.a,{href:"https://grpc.github.io/grpc/core/md_doc_statuscodes.html",children:(0,i.jsx)(r.code,{children:"Status"})})," model."]}),"\n",(0,i.jsx)(r.h3,{id:"41-mapping-to-http",children:"4.1. Mapping to HTTP"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"gRPC Code"}),(0,i.jsx)(r.th,{children:"Equivalent HTTP"}),(0,i.jsx)(r.th,{children:"Typical Use Case"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"INVALID_ARGUMENT"})}),(0,i.jsx)(r.td,{children:"400"}),(0,i.jsx)(r.td,{children:"Invalid request input"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"UNAUTHENTICATED"})}),(0,i.jsx)(r.td,{children:"401"}),(0,i.jsx)(r.td,{children:"Missing/invalid credentials"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"PERMISSION_DENIED"})}),(0,i.jsx)(r.td,{children:"403"}),(0,i.jsx)(r.td,{children:"Not authorized"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"NOT_FOUND"})}),(0,i.jsx)(r.td,{children:"404"}),(0,i.jsx)(r.td,{children:"Resource does not exist"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"ALREADY_EXISTS"})}),(0,i.jsx)(r.td,{children:"409"}),(0,i.jsx)(r.td,{children:"Duplicate resource or logical conflict"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"INTERNAL"})}),(0,i.jsx)(r.td,{children:"500"}),(0,i.jsx)(r.td,{children:"Server-side processing failure"})]})]})]}),"\n",(0,i.jsxs)(r.h3,{id:"42-error-payload-via-googlerpcstatus",children:["4.2. Error Payload (via ",(0,i.jsx)(r.code,{children:"google.rpc.Status"}),")"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-proto",children:"message Status {\n  int32 code = 1;\n  string message = 2;\n  repeated google.protobuf.Any details = 3;\n}\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"5-guidelines-for-api-developers",children:"5. Guidelines for API Developers"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Always return specific, actionable error messages."}),"\n",(0,i.jsx)(r.li,{children:"Use appropriate status codes and avoid 200 responses for failed operations."}),"\n",(0,i.jsxs)(r.li,{children:["For validation errors, include the field name and issue in the ",(0,i.jsx)(r.code,{children:"details"})," object."]}),"\n",(0,i.jsx)(r.li,{children:"Mask sensitive system errors from clients (log detailed info server-side only)."}),"\n",(0,i.jsx)(r.li,{children:"Avoid exposing internal stack traces or database errors in responses."}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"6-error-logging-and-monitoring",children:"6. Error Logging and Monitoring"}),"\n",(0,i.jsx)(r.p,{children:"All error responses (4xx and 5xx) are:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Logged centrally via the logging service (e.g., ELK stack)."}),"\n",(0,i.jsx)(r.li,{children:"Tagged with correlation/request IDs for traceability."}),"\n",(0,i.jsx)(r.li,{children:"Monitored via alerts for abnormal error rate patterns."}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Document Version: 1.0"}),"\n",(0,i.jsx)(r.li,{children:"Date: 2025-06-22"}),"\n",(0,i.jsx)(r.li,{children:"Author: ArturChernets"}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);