"use strict";(self.webpackChunkbbs_docs=self.webpackChunkbbs_docs||[]).push([[521],{5137:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Security/Auth_Design","title":"Authentication Design","description":"This document outlines the authentication design for the Bus Ticket Booking System using Keycloak and OAuth2.","source":"@site/docs/07_Security/01_Auth_Design.md","sourceDirName":"07_Security","slug":"/Security/Auth_Design","permalink":"/bbs-docs/en/docs/Security/Auth_Design","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"7. Security","permalink":"/bbs-docs/en/docs/security"},"next":{"title":"Authorization (RBAC)","permalink":"/bbs-docs/en/docs/Security/Authorization"}}');var s=i(4848),r=i(8453);const o={},c="Authentication Design",l={},d=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. Authentication Flow",id:"2-authentication-flow",level:2},{value:"3. Components",id:"3-components",level:2},{value:"4. Redirect-Based Login",id:"4-redirect-based-login",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"authentication-design",children:"Authentication Design"})}),"\n",(0,s.jsxs)(n.p,{children:["This document outlines the ",(0,s.jsx)(n.strong,{children:"authentication design"})," for the Bus Ticket Booking System using Keycloak and OAuth2."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Identity Provider"}),": Keycloak (external)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flow"}),": OAuth2 Authorization Code Grant"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client"}),": Frontend (redirect-based login)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Server"}),": Spring Boot backend validates JWT"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-authentication-flow",children:"2. Authentication Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n  A[User] --\x3e|1. GET /login| B[Frontend]\n  B --\x3e|2. Redirect to Keycloak| C[Keycloak]\n  C --\x3e|3. User Credentials| C\n  C --\x3e|4. Redirect with Code| B\n  B --\x3e|5. Exchange Code for Token| C\n  C --\x3e|6. JWT + Refresh Token| B\n  B --\x3e|7. Access API with Bearer JWT| D[Backend]\n  D --\x3e|8. Validate JWT| C\n  D --\x3e|9. Serve Protected Resource| B\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-components",children:"3. Components"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Keycloak Realm"}),": ",(0,s.jsx)(n.code,{children:"busrealm"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client"}),": ",(0,s.jsx)(n.code,{children:"bus-frontend"}),", redirect URI configured"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Roles"}),": ",(0,s.jsx)(n.code,{children:"ROLE_USER"}),", ",(0,s.jsx)(n.code,{children:"ROLE_ADMIN"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Token Settings"}),": Access token lifespan 10m, refresh token lifespan 30m"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-redirect-based-login",children:"4. Redirect-Based Login"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["User visits ",(0,s.jsx)(n.code,{children:"/login"})," on frontend"]}),"\n",(0,s.jsx)(n.li,{children:"Frontend redirects to Keycloak login page"}),"\n",(0,s.jsx)(n.li,{children:"After successful login, Keycloak redirects back with authorization code"}),"\n",(0,s.jsx)(n.li,{children:"Frontend exchanges code for JWT + refresh token"}),"\n",(0,s.jsx)(n.li,{children:"Frontend stores tokens (e.g., in memory) and uses JWT for API calls"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Document Version: 1.0"}),"\n",(0,s.jsx)(n.li,{children:"Date: 2025-06-23"}),"\n",(0,s.jsx)(n.li,{children:"Author: ArturChernets"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);