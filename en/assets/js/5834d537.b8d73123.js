"use strict";(self.webpackChunkbbs_docs=self.webpackChunkbbs_docs||[]).push([[5466],{1850:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"DevOps/Monitoring","title":"Monitoring Guide: Prometheus, Grafana & OpenSearch","description":"This document describes the monitoring stack using free, open-source tools to ensure visibility and alerting for your deployment.","source":"@site/docs/04_DevOps/03_Monitoring.md","sourceDirName":"04_DevOps","slug":"/DevOps/Monitoring","permalink":"/bbs-docs/en/docs/DevOps/Monitoring","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deployment Guide: Kubernetes, Helm & ArgoCD","permalink":"/bbs-docs/en/docs/DevOps/Deployment"},"next":{"title":"Secrets Management: SOPS & Sealed Secrets","permalink":"/bbs-docs/en/docs/DevOps/Secrets_Management"}}');var a=s(4848),i=s(8453);const t={},l="Monitoring Guide: Prometheus, Grafana & OpenSearch",o={},c=[{value:"1. Metrics Collection with Prometheus",id:"1-metrics-collection-with-prometheus",level:2},{value:"Installation via Helm",id:"installation-via-helm",level:3},{value:"Service Discovery",id:"service-discovery",level:3},{value:"Key Metrics to Track",id:"key-metrics-to-track",level:3},{value:"2. Dashboards with Grafana",id:"2-dashboards-with-grafana",level:2},{value:"Installation via Helm",id:"installation-via-helm-1",level:3},{value:"Dashboard Setup",id:"dashboard-setup",level:3},{value:"3. Log Aggregation with OpenSearch",id:"3-log-aggregation-with-opensearch",level:2},{value:"Installation via Helm",id:"installation-via-helm-2",level:3},{value:"Filebeat DaemonSet",id:"filebeat-daemonset",level:3},{value:"Key Log Queries",id:"key-log-queries",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"monitoring-guide-prometheus-grafana--opensearch",children:"Monitoring Guide: Prometheus, Grafana & OpenSearch"})}),"\n",(0,a.jsxs)(n.p,{children:["This document describes the monitoring stack using ",(0,a.jsx)(n.strong,{children:"free, open-source tools"})," to ensure visibility and alerting for your deployment."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"1-metrics-collection-with-prometheus",children:"1. Metrics Collection with Prometheus"}),"\n",(0,a.jsx)(n.h3,{id:"installation-via-helm",children:"Installation via Helm"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"helm repo add prometheus-community https://prometheus-community.github.io/helm-charts\nhelm install prometheus prometheus-community/prometheus\n"})}),"\n",(0,a.jsx)(n.h3,{id:"service-discovery",children:"Service Discovery"}),"\n",(0,a.jsx)(n.p,{children:"Annotate service pods to expose metrics:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'metadata:\n  annotations:\n    prometheus.io/scrape: "true"\n    prometheus.io/path: "/actuator/prometheus"\n    prometheus.io/port: "8080"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"key-metrics-to-track",children:"Key Metrics to Track"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"API Latency"}),": HTTP request duration (p95/p99)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Error Rate"}),": 4xx/5xx per minute"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Kafka Consumer Lag"}),": to monitor event processing"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Pod Health"}),": CPU/memory usage, restart count"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"2-dashboards-with-grafana",children:"2. Dashboards with Grafana"}),"\n",(0,a.jsx)(n.h3,{id:"installation-via-helm-1",children:"Installation via Helm"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"helm repo add grafana https://grafana.github.io/helm-charts\nhelm install grafana grafana/grafana\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dashboard-setup",children:"Dashboard Setup"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Import ",(0,a.jsx)(n.strong,{children:"official"})," Prometheus dashboard (ID: 1860)"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Import ",(0,a.jsx)(n.strong,{children:"Kafka"})," overview dashboard (ID: 7607)"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Custom panels:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"P99 latency (histogram_quantile)"}),"\n",(0,a.jsx)(n.li,{children:"Error budget burn rate (alerts per minute)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"3-log-aggregation-with-opensearch",children:"3. Log Aggregation with OpenSearch"}),"\n",(0,a.jsx)(n.h3,{id:"installation-via-helm-2",children:"Installation via Helm"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"helm repo add opensearch https://opensearch-project.github.io/helm-charts\nhelm install opensearch opensearch/opensearch\nhelm install dashboards opensearch/opensearch-dashboards\n"})}),"\n",(0,a.jsx)(n.h3,{id:"filebeat-daemonset",children:"Filebeat DaemonSet"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: filebeat\nspec:\n  selector:\n    matchLabels:\n      app: filebeat\n  template:\n    metadata:\n      labels:\n        app: filebeat\n    spec:\n      containers:\n      - name: filebeat\n        image: docker.elastic.co/beats/filebeat:7.17.0\n        volumeMounts:\n        - name: varlog\n          mountPath: /var/log\n      volumes:\n      - name: varlog\n        hostPath:\n          path: /var/log\n"})}),"\n",(0,a.jsx)(n.h3,{id:"key-log-queries",children:"Key Log Queries"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Error logs"}),": ",(0,a.jsx)(n.code,{children:"level:ERROR"})," in last 5m"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Slow requests"}),": HTTP duration > 1s"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Kafka errors"}),": consumer group failures"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Document Version: 1.0"}),"\n",(0,a.jsx)(n.li,{children:"Date: 2025-06-21"}),"\n",(0,a.jsx)(n.li,{children:"Author: ArturChernets"}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const a={},i=r.createContext(a);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);